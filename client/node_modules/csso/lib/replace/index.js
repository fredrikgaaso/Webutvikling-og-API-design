import { walk } from 'css-tree';
import Atrule from 'csso/lib/replace/Atrule.js';
import AttributeSelector from 'csso/lib/replace/AttributeSelector.js';
import Value from 'csso/lib/replace/Value.js';
import Dimension from 'csso/lib/replace/Dimension.js';
import Percentage from 'csso/lib/replace/Percentage.js';
import { Number } from 'csso/lib/replace/Number.js';
import Url from 'csso/lib/replace/Url.js';
import { compressHex, compressIdent, compressFunction } from 'csso/lib/replace/color.js';

const handlers = {
    Atrule,
    AttributeSelector,
    Value,
    Dimension,
    Percentage,
    Number,
    Url,
    Hash: compressHex,
    Identifier: compressIdent,
    Function: compressFunction
};

export default function(ast) {
    walk(ast, {
        leave(node, item, list) {
            if (handlers.hasOwnProperty(node.type)) {
                handlers[node.type].call(this, node, item, list);
            }
        }
    });
};
