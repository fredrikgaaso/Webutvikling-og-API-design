var walk = require('css-tree').walk;
var handlers = {
    Atrule: require('csso/lib/replace/Atrule'),
    AttributeSelector: require('csso/lib/replace/AttributeSelector'),
    Value: require('csso/lib/replace/Value'),
    Dimension: require('csso/lib/replace/Dimension'),
    Percentage: require('csso/lib/replace/Percentage'),
    Number: require('csso/lib/replace/Number'),
    String: require('csso/lib/replace/String'),
    Url: require('csso/lib/replace/Url'),
    Hash: require('csso/lib/replace/color').compressHex,
    Identifier: require('csso/lib/replace/color').compressIdent,
    Function: require('csso/lib/replace/color').compressFunction
};

module.exports = function(ast) {
    walk(ast, {
        leave: function(node, item, list) {
            if (handlers.hasOwnProperty(node.type)) {
                handlers[node.type].call(this, node, item, list);
            }
        }
    });
};
